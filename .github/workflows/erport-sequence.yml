name: ERPort Sequence

on:
  workflow_call:
    inputs:
      erport:
        required: true
        type: string

jobs:
  approval-1:
    name: "${{ inputs.erport }} - update approval"
    runs-on: ubuntu-latest
    environment:
        name: approval-erport-update
    steps:
      - name: Awaiting Final Manual Approval for ${{ inputs.erport }}
        run: echo "Final approval granted for ${{ inputs.erport }}"

  powershell-step:
    name: "Update ERPort - ${{ inputs.erport }}"
    needs: approval-1
    runs-on: windows-latest
    steps:
      - name: Run PowerShell Script for ${{ inputs.erport }}
        run: |
          Write-Host "Running script for ${{ inputs.erport }}"

  approval-2:
    name: "${{ inputs.erport }} - confirm update"
    needs: powershell-step
    environment:
        name: approval-erport-confirmation
    runs-on: ubuntu-latest
    steps:
      - name: Awaiting Final Manual Approval for ${{ inputs.erport }}
        run: echo "Final approval granted for ${{ inputs.erport }}"
